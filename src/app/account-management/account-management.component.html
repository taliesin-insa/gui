<div class="col-lg-8 offset-lg-2 card">
  <h2 class="font-weight-bold ml-1" style="font-size: 2.5em">Gestion des comptes</h2>
  <hr>

  <table class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
      <th scope="col" class="text-center">Identifiant</th>
      <th scope="col" class="text-center">Adresse mail</th>
      <th scope="col" class="text-center">Administrateur</th>
    </tr>
    </thead>
    <tbody>

    <!-- Generate all the accounts -->
    <ng-container *ngFor="let account of accounts">
      <tr (click)="onSelect(account)">
        <td>{{account.name}}</td>
        <td>{{account.email}}</td>
        <td class="text-center">{{(account.role) ? 'Oui' : 'Non'}}</td>
      </tr>
    </ng-container>

    </tbody>
  </table>

  <div *ngIf="selectedAccount">
    <hr>
    <h4 class="font-weight-bold">Détails du compte : </h4>
    <form [formGroup]="changeAccountForm">
      <div class=" row position-relative mx-auto">
        <div class="col 3">
          <label for="name">Identifiant :</label>
          <input [ngModel]="selectedAccount.name" disabled placeholder="name" type="text" formControlName="name"
                 id="changeName">
        </div>
        <div class="col 3">
          <label for="email">Adresse mail :</label>
          <input [ngModel]="selectedAccount.email" placeholder="email" type="text" formControlName="email"
                 id="changeEmail">
        </div>
        <div class="col 3">
          <label for="role">Droits d'administration :</label>
          <input [ngModel]="selectedAccount.role" type="checkbox" placeholder="admin" formControlName="role"
                 id="changeRole">
        </div>
      </div>
      <div class="col-xs-6 text-center">
        <button type="submit" class="btn btn-info btn-text font-weight-bold"
                (click)="onUpdate(changeAccountForm.value)">
          Enregistrer
        </button>
        <button class="btn btn-danger btn-text font-weight-bold" (click)="modalService.open(popUpDelete)">
          Supprimer
        </button>
      </div>
    </form>

    <!--TEMPLATE FOR THE CONFIRMATION MODAL ATTACHED WITH THE SUPPRESSION BUTTON -->
    <ng-template #popUpDelete let-modal>
      <div class="modal-header alert-danger">
        <h4 class="modal-title" id="modal-basic-title">Attention</h4>
      </div>
      <div class="modal-body">
        Vous allez supprimer le compte sélectionné, êtes-vous certain de votre décision ?
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" (click)="modal.close() ; onSubmit(Delete(selectedAccount));">
          Continuer
        </button>
        <button type="button" class="btn btn-light" (click)="modal.close()">Annuler</button>
      </div>
    </ng-template>

  </div>
  <hr>

  <div>
    <h4 class="font-weight-bold">Ajouter un compte :</h4>
    <form [formGroup]="accountForm" (ngSubmit)="onSubmit(accountForm.value)">
      <div class=" row position-relative mx-auto">
        <div class="col 3">
          <label for="name">Identifiant :</label>
          <input type="text" formControlName="name" id="name">
        </div>
        <div class="col 3">
          <label for="email">Adresse mail :</label>
          <input type="text" formControlName="email" id="email">
        </div>
        <div class="col 3">
          <label for="role">Droits d'administration :</label>
          <input type="checkbox" formControlName="role" id="role">
        </div>
      </div>
      <div class="col-xs-6 text-center">
        <button type="submit" class="btn btn-success btn-text font-weight-bold">
          Nouveau compte
        </button>
      </div>
    </form>
  </div>
</div>
